{% extends "base.html" %}

{% block title %}PyTutor::Question Editor{% endblock %}

{% block body %}

<section id="question-form">
    <h1>Question Editor</h1>
    <dl id="question-info">
        <dt>Created by:</dt>
          <dd>{{question.instance.creator}} on {{question.instance.created}}</dd>
        <dt>Last modified by:</dt>
          <dd>{{question.instance.modifier}} on {{question.instance.modified}}</dd>
        <dt>Version:</dt>
          <dd id="version">{{question.instance.version}}</dd>
    </dl>
    <form action="/tutor/save" method="post" id="question-form" role="form">
        {% csrf_token %}
        <input type="hidden" name="pk" value="{{pk}}">

        <!--input type="hidden" id="id_prompt" name="prompt">
        <input type="hidden" id="id_solution" name="solution"-->
       
        <div class="fieldWrapper">
            {{ question.function_name.errors }}
            {{ question.function_name.label_tag }} 
            {{ question.function_name }} 
        </div>
        <div class="fieldWrapper">
            {{ question.prompt.errors }}
            {{ question.prompt.label_tag }}
            {{ question.prompt }} 
            <!--div id="prompt-editor">text

            </div-->
        </div>
        <div class="fieldWrapper">
            {{ question.solution.errors }}
            {{ question.solution.label_tag }}
            {{ question.solution }} 
            <!--div id="solution-editor">text
            </div-->
        </div>
        <div class="fieldWrapper">
            {{ question.level.errors }}
            {{ question.level.label_tag }} 
            {{ question.level }} 
        </div>
        <div class="fieldWrapper">
            {{ question.tags.errors }}
            {{ question.tags.label_tag }} 
            {{ question.tags }} 
        </div>
        <div class="fieldWrapper">
            {{ question.comment.errors }}
            {{ question.comment.label_tag }} 
            {{ question.comment }} 
        </div>
        <input type="submit" value="Submit">
    </form>
    <a href="/tutor/{{question.instance.id}}/delete">Delete this question</a>
</section>

<section id="unit-tests">
    <h2>Unit Tests</h2>
    <form id="test-form" action="/tutor/test/save" method="post">

        {% csrf_token %}
        <input type="hidden" name="question_id" value="{{pk}}">
        {{ test_form.as_p }}
        <input type="submit" value="add test">
    </form>
    <ul>
    {% for id, test in tests.items %}
        <li>Test: {{test.0}}<br>Result: {{test.1}}<br><a href="/tutor/test/{{id}}/del" alt="Delete this test">x</a></li>
    {% endfor %}
    </ul>
</section>

<section id="question-history">
    <h2>Revision History</h2>
    <table>
        <tr><th>version</th><th>date modified</th><th>modified by</th></tr>
        {% for aq in history %}
            <tr class="{% cycle 'odd' 'even'%}"><td>{{aq.version}}</td><td>{{aq.modified}}</td><td>{{aq.modifier}}</td></tr>
        {% endfor %}
    </table>


</section>

{% endblock %}
