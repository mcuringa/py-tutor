{% extends "base.html" %}

{% block title %}PyTutor::Question Editor{% endblock %}

{% block body %}
<div class="row">
<div class="col-xs-12 col-md-6">
<section id="question-form">
    <h1>Question Editor</h1>
    <dl id="question-info">
        <dt>Created by:</dt>
          <dd>{{question.instance.creator}} on {{question.instance.created}}</dd>
        <dt>Last modified by:</dt>
          <dd>{{question.instance.modifier}} on {{question.instance.modified}}</dd>
        <dt>Version:</dt>
          <dd id="version">{{question.instance.version}}</dd>
    </dl>
    <form action="/tutor/save" method="post" id="question-form" role="form">
        {% csrf_token %}
        <input type="hidden" name="pk" value="{{pk}}">

        <!--input type="hidden" id="id_prompt" name="prompt">
        <input type="hidden" id="id_solution" name="solution"-->
       
        <div class="form-group">
            {{ question.function_name.errors }}
            {{ question.function_name.label_tag }} 
            {{ question.function_name }} 
        </div>
        <div class="form-group">
            {{ question.prompt.errors }}
            {{ question.prompt.label_tag }}
            {{ question.prompt }} 
            <!--div id="prompt-editor">text

            </div-->
        </div>
        <div class="form-group">
            {{ question.solution.errors }}
            {{ question.solution.label_tag }}
            {{ question.solution }} 
            <!--div id="solution-editor">text
            </div-->
        </div>
        <div class="form-group">
            {{ question.level.errors }}
            {{ question.level.label_tag }} 
            {{ question.level }} 
        </div>
        <div class="form-group">
            {{ question.tags.errors }}
            {{ question.tags.label_tag }} 
            {{ question.tags }} 
        </div>
        <div class="form-group">
            {{ question.comment.errors }}
            {{ question.comment.label_tag }} 
            {{ question.comment }} 
        </div>
        <input type="submit" value="Submit" class="btn btn-default btn-success"> 
    <button class="btn btn-danger"><a href="/tutor/{{question.instance.id}}/delete">Delete Question</a></button>
    </form>
</section>
</div>
<div class="col-xs-12 col-md-6">
<section id="unit-tests">
    <h2>Unit Tests</h2>
    <form id="test-form" action="/tutor/test/save" method="post">
        <h3>New Test</h3>
        {% csrf_token %}
        <input type="hidden" name="question_id" value="{{pk}}">
        {{ test_form.as_p }}
        <input type="submit" value="add test" class="btn btn-default btn-success">
    </form>
    <h3>Existing Tests</h3>
    <ul id="test-list">
    {% for id, test in tests.items %}
        <li class="{% if test.2 %}bg-success{% else %}bg-danger{% endif %}">
            Test: {{test.0}}<br>Result: {{test.1}}<br><a href="/tutor/test/{{id}}/del" alt="Delete this test">x</a>
        </li>
    {% endfor %}
    </ul>
</section>
</div>

</div> <!--//row -->
<br><br>
<div class="panel panel-primary">
    <div class="panel-heading">Revision History</div>
    <table class="table table-striped">
        <tr><th>version</th><th>date modified</th><th>modified by</th></tr>
        {% for aq in history %}
            <tr><td>{{aq.version}}</td><td>{{aq.modified}}</td><td>{{aq.modifier}}</td></tr>
        {% endfor %}
    </table>
</div>

{% endblock %}
