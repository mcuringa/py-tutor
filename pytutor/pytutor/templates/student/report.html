{% extends "base.html" %}

{% block title %}PyTutor Home{% endblock %}

{% block body %}


<section id="question-list"class="panel panel-primary">
    <div class="panel-heading"><h2 class="panel-title">User Report: {{user}}</h2></div>
    <div class="panel-body">

  
 
        <a href="/study/report/{{user.username}}" class="btn btn-warning btn-sm" title="My questions">Question Report</a>
        <a href="/question/list" class="btn btn-warning btn-sm" title="All Questions">User Log</a>

      
<!--       Response.objects.annotate(num_attempts=Count("question"))
 -->

        <table id="question-list" class="table table-striped table-bordered table-condensed table-sortable">

            <thead>
                <tr>
                  <th class="text-center">Question ID</th>
                  <th class="text-center">Question Level</th>
                  <th class="text-center">Question Name</th>
                  <th class="text-center">Correct Response</th>
                  <th class="text-center">Incorrect Response</th>
                  <th class="text-center">Number of Attempts</th>
                  <th class="text-center">Question Time</th>
                
                </tr>
            </thead>
            <tbody>
            {% for r in student_responses %}}
              <tr>
                <td> {{r.question.id}} </td>
                <td> {{r.question.level}} </td>
                <td> <a href="#" class="question_detail" data-quid="{{r.question.id}}" data-target="#modal">{{r.question.function_name}}</a> </td>
                <td> {{r.num_right}} </td>
                <td> {{r.num_wrong}} </td>
                <td> - </td>
                <td> {{r.question.submitted}} </td>
              </tr>
            {% endfor %}

            </tbody>
        </table>
<!-- Button trigger modal ... repurpose for text links -->
<!-- <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Launch demo modal
</button> -->

<!-- Modal -->
<!-- <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-

      <ul> -->
      {% for level,list in level_questions.items %}
        <li>Level: {{ level}}
      <ul>
         
      {% for question in list %}

      <li> {{ question.function_name }} {{ question.user_responded_correctly }} {{response_number}}</li>
      {% endfor %}
      </ul>
    
      </li>
     {% endfor %}
     </ul>
<!-- #Now I want to call group by on this list ^ so all the questions by level show the passed ones first (in green)

the failed ones second (in red)

and the not answered ones yet last (in orange) -->

<!-- Modal -->
<div id="question-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body"></div>
    </div>
  </div>
</div>
 
     </div>
</section> 
     {% endblock %}